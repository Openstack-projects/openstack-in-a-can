{{- define "neutron:/etc/neutron/plugins/ml2/ml2_conf.ini" -}}
ml2:
  tenant_network_types: vxlan
  extension_drivers: port_security
  mechanism_drivers: openvswitch,linuxbridge
ml2_type_flat:
  flat_networks: public,
ml2_type_geneve:
  vni_ranges: 1:1000
ml2_type_gre:
  tunnel_id_ranges: 1:1000
ml2_type_vlan:
  network_vlan_ranges: public
ml2_type_vxlan:
  vni_ranges: 1:1000
securitygroup:
  firewall_driver: openvswitch
agent:
  tunnel_types: vxlan
  root_helper_daemon: sudo /var/lib/openstack/bin/neutron-rootwrap-daemon /etc/neutron/rootwrap.conf
  root_helper: sudo /var/lib/openstack/bin/neutron-rootwrap /etc/neutron/rootwrap.conf
ovs:
  datapath_type: system
  bridge_mappings: public:br-ex
  tunnel_bridge: br-tun
{{- end -}}

{{- include "helpers.osh.oslo.overlay" ( dict "Global" $ "currentConfig" "neutron:/etc/neutron/plugins/ml2/ml2_conf.ini" ) -}}

